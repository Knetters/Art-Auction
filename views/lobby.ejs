<%- include('./partials/head') %>

<%- include('./partials/iconBar') %>

<%- include('./partials/collection') %>

<div class="page">

  <h1>Waiting for players...</h1>

  <section class="medium-menu">
    <span class="player-count"><%= players.length %>/8</span>
    <span class="game-code"><%= gameCode %></span>
    <h2>Players</h2>
    <ul class="player-invite-list">
      <% if (players.length === 0) { %>
        <li class="no-players">No players yet...</li>
      <% } if (players.length < 3) { %>
        <% players.forEach(player => { %>
          <li class="<% if(player.role === "host") { %>host<% } %>"><%= player.name %><span id="remove-player-icon" class="player-list-icon float-right <% if(player.role === "host") { %>hide<% } %>"><i class="fa fa-times" aria-hidden="true"></i></span></li>
        <% }); %>
        <span class="invite-more-players-message">Invite more players to start</span>
      <% } else { %>
        <% players.forEach(player => { %>
          <li class="<% if(player.role === "host") { %>host<% } %>"><%= player.name %><span id="remove-player-icon" class="player-list-icon float-right <% if(player.role === "host") { %>hide<% } %>"><i class="fa fa-times" aria-hidden="true"></i></span></li>
        <% }); %>
      <% } %>
    </ul>
    <% if (playerRole === 'host') { %>
      <% if (players.length < 3) { %>
        <button id="host-start-button" class="not-enough-players" onclick="navigateToGame()">Start</button>
      <% } else { %>
        <button id="host-start-button" onclick="navigateToGame()">Start</button>
      <% } %>
    <% } %>
  </section>

</div>

<div id="game" class="page">
  <section class="inner-game">

    <% if ("1" === '1') { %>
      <section class="medium-menu">
        <form>
          <h2>What should the painter make for you</h2>
          <input type="text">
        </form>
      </section>
    <% } else { %>
      <h2>The art curator is preparing a prompt</h2>
    <% } %>

  </section>
</div>

<%- include('./partials/foot') %>

<script>
  // Function to navigate to the anchor point called "game"
  function navigateToGame() {
    const gameAnchor = document.getElementById('game');
    if (gameAnchor) {
      gameAnchor.scrollIntoView({ behavior: 'smooth' });
    }
  }

  const socket = io(); // Establish socket.io connection

  // Function to render the host button based on the player's role
  function renderHostButton(role) {
    const hostButton = document.getElementById('host-start-button');
    if (hostButton) {
      if (role === 'host') {
        hostButton.style.display = 'block';
      } else {
        hostButton.style.display = 'none';
      }
    }
  }
</script>
<%- include('./partials/head') %>

<%- include('./partials/iconBar') %>

<%- include('./partials/collection') %>

<h1>Waiting for players...</h1>

<section class="medium-menu">
  <div class="hover-text game-code"><%= gameCode %>
    <span class="tooltip-text top">Copy code</span>
  </div>
  <h2>Players</h2>
  <ul class="player-invite-list">
    <% if (players.length === 0) { %>
      <li class="no-players">No players yet...</li>
    <% } else { %>
      <% players.forEach(player => { %>
        <li class="<% if(player.role === "host") { %>host<% } %>"><%= player.name %><span id="remove-player-icon" class="player-list-icon float-right <% if(player.role === "host") { %>hide<% } %>"><i class="fa fa-times" aria-hidden="true"></i></span></li>
      <% }); %>
    <% } %>
  </ul>
  <% if (playerRole === 'host') { %> <!-- Only show the start button to the player with the role "host" -->
    <% if (players.length < 3) { %>
      <button id="host-start-button" class="not-enough-players">Start</button>
    <% } else { %>
      <button id="host-start-button">Start</button>
    <% } %>
  <% } %>
</section>

<%- include('./partials/foot') %>

<script>
  const socket = io(); // Establish socket.io connection

  // Function to render the host button based on the player's role
  function renderHostButton(role) {
    const hostButton = document.getElementById('host-start-button');
    if (hostButton) {
      if (role === 'host') {
        hostButton.style.display = 'block';
      } else {
        hostButton.style.display = 'none';
      }
    }
  }
</script>